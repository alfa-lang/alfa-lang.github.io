

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-146018870-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
    </script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>ALFA Language Extensions &mdash; ALFA</title>
  

  
  
    <link rel="shortcut icon" href="../_static/alfa-a.ico"/>
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../',
              VERSION:'1.0.0',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/alfa-theme.css" type="text/css" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Data Model Tests" href="langtesting.html" />
    <link rel="prev" title="ALFA Labs" href="labs.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/AlfaLogo4c4c4c.svg" class="logo" alt="Logo"/>
          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../lang/guide.html">Language Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools/tools.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exporters/exporters.html">Code Generators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getstarted.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../apis/runtimeapis.html">Runtime APIs &amp; Guides</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="labs.html">ALFA Labs</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">ALFA Language Extensions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-extension-type">The <code class="docutils literal notranslate"><span class="pre">extension</span></code> type</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#using-extension-instances">Using <code class="docutils literal notranslate"><span class="pre">extension</span></code> instances</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="langtesting.html">Data Model Tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="labsalfadocs.html">AlfaDocs</a></li>
<li class="toctree-l2"><a class="reference internal" href="labsxsd.html">XSD Importer</a></li>
<li class="toctree-l2"><a class="reference internal" href="labspython.html">Python Exporter</a></li>
<li class="toctree-l2"><a class="reference internal" href="labscassandra.html">Cassandra SQL Exporter</a></li>
<li class="toctree-l2"><a class="reference internal" href="labsopenapi.html">OpenAPI Exporter</a></li>
<li class="toctree-l2"><a class="reference internal" href="labstbl.html">Table Runtime</a></li>
<li class="toctree-l2"><a class="reference internal" href="labsbinaryruntimes.html">Binary Runtimes</a></li>
<li class="toctree-l2"><a class="reference internal" href="labsalfawebide.html">ALFA Web-based Toolset</a></li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Alfa</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="labs.html">ALFA Labs</a> &raquo;</li>
        
      <li>ALFA Language Extensions</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="alfa-language-extensions">
<span id="labslangextension"></span><h1>ALFA Language Extensions<a class="headerlink" href="#alfa-language-extensions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The modelling capabilities in ALFA are able to capture all data and API modelling needs. However there maybe times that
certain abstractions are needed, and those may not naturally fit the concepts supported in ALFA.</p>
<p>ALFA allows an <code class="docutils literal notranslate"><span class="pre">extension</span></code> type to be declared. This can be regarded as a meta-programming construct for ALFA. Once
extensions are defined, instances of those extensions can be declared within ALFA models. This effectively allows you
to extend the ALFA language with other abstractions while using existing definitions from your model.</p>
<p>Naturally, the ALFA compiler will perform extensive type checking on the extension and its usages.</p>
<p>It should however be emphasised that by using ALFA traits, enums, records etc., majority of domains and problems can be
modelled. Careful consideration should be given before embarking on the use of extensions to assert that existing concepts
cannot be used in its place.</p>
</div>
<div class="section" id="the-extension-type">
<h2>The <code class="docutils literal notranslate"><span class="pre">extension</span></code> type<a class="headerlink" href="#the-extension-type" title="Permalink to this headline">¶</a></h2>
<p>An <code class="docutils literal notranslate"><span class="pre">extension</span></code> allows you to declare a new UDT definition type in ALFA. That declaration can be used to define instances
of the newly declared UDT. This can be explained with an example.</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="c1">// Define &#39;task&#39; as a top level ALFA construct</span>
<span class="k">extension</span> <span class="n">task</span> <span class="kt">string</span> <span class="p">{</span>
    <span class="n">Inputs</span> <span class="p">:</span> <span class="k">list</span><span class="p">&lt;</span> <span class="k">$entityName</span> <span class="p">&gt;</span>
    <span class="n">Output</span> <span class="p">:</span> <span class="k">$entityName</span>
    <span class="n">Timeout</span> <span class="p">:</span> <span class="k">duration</span>
<span class="p">}</span>

<span class="k">namespace</span> <span class="nn">Products</span>

<span class="k">entity</span> <span class="n">Inventory</span> <span class="nf">key</span><span class="p">(</span> <span class="p">...</span> <span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<span class="k">entity</span> <span class="n">Sales</span> <span class="nf">key</span><span class="p">(</span> <span class="p">...</span> <span class="p">)</span> <span class="p">{</span> <span class="p">}</span>
<span class="k">entity</span> <span class="n">SupplierOrder</span> <span class="nf">key</span><span class="p">(</span> <span class="p">...</span> <span class="p">)</span> <span class="p">{</span> <span class="p">}</span>

<span class="c1">// This task defines the Daily Restock process flow accepting the</span>
<span class="c1">// current inventory and sales, and produces an order request to suppliers.</span>
<span class="n">task</span> <span class="nf">DailyRestockProcessing</span> <span class="p">(</span>
    <span class="n">Input</span> <span class="p">:</span> <span class="p">[</span> <span class="n">Inventory</span><span class="p">,</span> <span class="n">Sales</span> <span class="p">]</span>
    <span class="n">Output</span> <span class="p">:</span> <span class="n">SupplierOrder</span>
    <span class="n">Timeout</span> <span class="p">:</span> <span class="s">&quot;P1H&quot;</span> <span class="c1">// 1 hour using ALFA duration (ISO 8601) type</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The example introduces a new extension named <code class="docutils literal notranslate"><span class="pre">task</span></code>. This can be imagined as some workflow processing definition
requirement to capture inputs entities and an output.</p>
<p>Once an <code class="docutils literal notranslate"><span class="pre">extension</span></code> is declared, it can be used as an ALFA top level construct - <strong>as if it was a built-in concept</strong>.
In the example, a new <code class="docutils literal notranslate"><span class="pre">task</span></code> has been defined as <code class="docutils literal notranslate"><span class="pre">DailyRestockProcessing</span></code> with properties required by the
task extension. This object represents an instance of the task extension declared previously.</p>
<p>An extension is not scoped to a namespace. Whereas an instance of an extension is declared within a namespace.
In the example, the task DailyRestockProcessing will have a fully qualified name of <code class="docutils literal notranslate"><span class="pre">Products.DailyRestockProcessing</span></code>.</p>
<p><strong>Further Examples</strong></p>
<p>In the declaration <code class="docutils literal notranslate"><span class="pre">extension</span> <span class="pre">task</span> <span class="pre">string</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">}</span></code> from the previous example, <code class="docutils literal notranslate"><span class="pre">string</span></code> is the type of the text ‘DailyRestockProcessing’. It is not however restricted to <code class="docutils literal notranslate"><span class="pre">string</span></code> which is just the type of an identifier.</p>
<p>The code below shows an example of a fictitious extension used to model dependencies between entities in order to process them in
dependency order.</p>
<div class="highlight-csharp notranslate"><div class="highlight"><pre><span></span><span class="k">extension</span> <span class="n">dependencies</span> <span class="k">$entityName</span> <span class="p">{</span>
    <span class="n">dependents</span> <span class="p">:</span> <span class="k">list</span><span class="p">&lt;</span> <span class="k">$entityName</span> <span class="p">&gt;</span>
<span class="p">}</span>

<span class="k">namespace</span> <span class="nn">Data</span>

<span class="k">entity</span> <span class="n">A</span> <span class="p">{</span> <span class="p">}</span>
<span class="k">entity</span> <span class="n">B</span> <span class="p">{</span> <span class="p">}</span>
<span class="k">entity</span> <span class="n">C</span> <span class="p">{</span> <span class="p">}</span>

<span class="c1">// Define A as depending on B &amp; C</span>
<span class="n">dependencies</span> <span class="nf">A</span> <span class="p">(</span>
   <span class="n">dependents</span> <span class="p">:</span> <span class="p">[</span> <span class="n">B</span><span class="p">,</span> <span class="n">C</span> <span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Given the <code class="docutils literal notranslate"><span class="pre">extension</span></code> declaration uses <code class="docutils literal notranslate"><span class="pre">dependencies</span> <span class="pre">$entityName</span></code>, the ALFA compiler will assert that in the declaration
<code class="docutils literal notranslate"><span class="pre">dependencies</span> <span class="pre">A</span> <span class="pre">(...)</span></code>, <code class="docutils literal notranslate"><span class="pre">A</span></code> is a valid entity name.</p>
<div class="section" id="using-extension-instances">
<h3>Using <code class="docutils literal notranslate"><span class="pre">extension</span></code> instances<a class="headerlink" href="#using-extension-instances" title="Permalink to this headline">¶</a></h3>
<p>ALFA Pro makes extension instance declarations available via its abstract syntax tree (AST). Given the expected use of
an <code class="docutils literal notranslate"><span class="pre">extension</span></code> is unknown to ALFA, you need to add a code generator to produce code based on the AST.</p>
<p>At this stage ALFA enforces the model’s type correctness, however it is not possible to enforce other rules required
as part of the extension. This will be supported in future allowing pluggable rules against extension instances.</p>
<p>Please contact <a class="reference external" href="mailto:info&#37;&#52;&#48;schemarise&#46;com">info<span>&#64;</span>schemarise<span>&#46;</span>com</a> for details on how extensions can be used and upcoming features around extensions.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <center>
    <footer>
        <hr/>
        <div role="contentinfo">
            <p>
                    © Copyright 2020 Schemarise Ltd |
                    <a href='/legal/privacy.html'>Privacy</a> | 
                    <a href='/legal/terms.html'>Terms</a>
            </p>
        </div> 
    </footer>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/cookie-bar/cookiebar-latest.min.js?"></script>
</center> 
        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>
